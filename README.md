# 🍜 锋味派订餐系统

> 一个功能完整的在线订餐和管理系统，专为锋味派餐厅设计

## 🆕 重要更新：部分收货管理

### 新功能概述
为了更好地应对供应商分批次送货的实际情况，我们新增了**部分收货功能**，让您可以灵活管理货物入库，解决冷库容量限制的问题。

### 📦 部分收货特性

#### 1. 分批收货入库
- **灵活选择**：可以选择部分产品进行收货，无需等待全部货物到齐
- **数量控制**：每个产品可以自定义收货数量，不超过剩余未收数量  
- **状态跟踪**：系统自动跟踪每个产品的收货进度

#### 2. 两种收货方式
- **全部收货**：传统的一键收货方式，适用于货物全部到齐的情况
- **部分收货**：新增的分批收货方式，适用于分批次到货的情况

#### 3. 智能状态管理
- **待收货** (pending)：刚创建的采购订单，未开始收货
- **部分收货** (partial)：已收货部分产品，还有剩余未收货  
- **已完成** (completed)：所有产品都已收货完毕

### 🔧 使用方法

1. **进入采购订单管理**：在管理端选择"采购订单"
2. **选择收货方式**：
   - 点击"全部收货"：一次性收货所有产品
   - 点击"部分收货"：打开分批收货界面
3. **设置收货数量**：在部分收货界面中设置每个产品的收货数量
4. **确认收货**：系统自动更新库存和订单状态

### 💡 应用场景
- **冷库容量限制**：分批收货适应存储空间
- **分批次送货**：配合供应商的送货安排  
- **质量检查**：先收货合格产品，有问题的产品后续处理

---

## ✨ 功能特色

### 🛒 客户端功能
- **商品浏览**：精美的商品展示界面，支持现货和预购商品
- **购物车管理**：智能购物车，支持数量调整和商品删除
- **订单下单**：完整的订单流程，支持自取和外送
- **支付集成**：支持 ToyyibPay 在线支付
- **订单查询**：通过订单号查询订单状态

### 👨‍💼 管理员功能
- **仪表盘**：实时销售数据和团购管理
- **商品管理**：商品的增删改查，库存管理
- **订单管理**：订单状态更新，支付确认
- **团购系统**：智能团购计算，手动截团功能
- **数据分析**：销售报表和客户分析
- **扫码打包**：条形码扫描打包系统
- **会员管理**：客户消费记录和排名

### 🎯 团购系统特色
- **自动计算**：每200盒自动成团
- **手动截团**：管理员可随时截止当前团
- **历史记录**：完整的团购历史追踪
- **云端同步**：团购数据存储在 Supabase 云端

## 🛠️ 技术栈

- **前端**: React 19 + TypeScript + Vite
- **样式**: Tailwind CSS
- **后端**: Supabase (数据库 + 认证 + 存储)
- **支付**: ToyyibPay 集成
- **扫码**: ZXing 条形码扫描
- **图表**: Recharts 数据可视化

## 🚀 本地开发

### 前提条件
- Node.js 18+
- Supabase 账户

### 安装和运行

1. **克隆项目**
   ```bash
   git clone <repository-url>
   cd fengwei-pai-ordering-system
   ```

2. **安装依赖**
   ```bash
   npm install
   ```

3. **环境配置**
   
   在项目根目录创建 `.env.local` 文件：
   ```env
   VITE_SUPABASE_URL=your_supabase_url
   VITE_SUPABASE_ANON_KEY=your_supabase_anon_key
   VITE_TOYYIBPAY_SECRET_KEY=your_toyyibpay_secret
   ```

4. **数据库设置**
   
   在 Supabase 中创建以下表：
   - `products` - 商品表
   - `orders` - 订单表
   - `order_items` - 订单商品表
   - `members` - 会员表
   - `group_management` - 团购管理表
   - `group_history` - 团购历史表
   - `settings` - 系统设置表

5. **启动开发服务器**
   ```bash
   npm run dev
   ```

6. **访问应用**
   - 客户端: http://localhost:3000
   - 管理员: 访问后点击"管理员入口"

## 📦 部署到 Netlify

1. **构建项目**
   ```bash
   npm run build
   ```

2. **上传到 Netlify**
   - 登录 Netlify
   - 拖拽 `dist` 文件夹到部署区域
   - 或连接 Git 仓库进行自动部署

3. **环境变量设置**
   在 Netlify 后台设置环境变量：
   - `VITE_SUPABASE_URL`
   - `VITE_SUPABASE_ANON_KEY`
   - `VITE_TOYYIBPAY_SECRET_KEY`

## 🔧 管理员账户

默认管理员密码在 `constants.ts` 文件中设置。

## 📄 许可证

本项目为私有项目，仅供锋味派餐厅使用。

---

**开发者**: AI Assistant  
**版本**: 1.0.0  
**最后更新**: 2025年10月
